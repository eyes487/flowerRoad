var formGroup=document.getElementsByTagName("form")[0],userName=formGroup.getElementsByTagName("input")[0],passWord=formGroup.getElementsByTagName("input")[1],checkBox=formGroup.getElementsByTagName("input")[2],lrBtn=document.getElementsByClassName("lrBtn")[0],hint=formGroup.getElementsByClassName("hint"),checkCodeArea=document.getElementById("code"),remember=document.getElementById("remember"),captcha="";function checkName(){var e=userName.value.trim();""!=e&&(11!=e.length?hint[0].innerText="请输入11位数":/^(-)?\d+(\.\d+)?$/.test(e)?hint[0].innerText="":hint[0].innerText="请输入正确数字")}function checkPW(){var e=passWord.value.trim();""!=e&&(e.length<6||12<e.length?hint[1].innerText="密码有误":hint[1].innerText="")}function init(){if(localStorage.getItem("remember")){var e=localStorage.getItem("userInfo");e=JSON.parse(e)||{},userName.value=e.userName,passWord.value=e.passWord,remember.checked=!0}}function createCode(){var a=document.getElementById("code");ajax({type:"get",url:"captcha",data:"",success:function(e){var t=JSON.parse(e);captcha=t.text,a.innerHTML=t.code,console.log(t)}})}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},(lrBtn=document.getElementsByClassName("lrBtn")[0]).onclick=function(){var e=document.getElementsByClassName("checkInput")[0].value.toLowerCase(),t=document.forms[0].elements[0].value,a=document.forms[0].elements[1].value;remember.checked&&(localStorage.setItem("userInfo",JSON.stringify({userName:t,passWord:a})),localStorage.setItem("remember",remember.checked)),captcha.toUpperCase()==e.toUpperCase()?ajax({type:"post",url:"loginPost.do",data:"userName="+t+"&pwd="+$.md5(a),success:function(e){var t=JSON.parse(e);200==t.code?"admin"==t.data.userName?location.href="backstage.html":(window.sessionStorage.setItem("Key",t.data.userName),window.sessionStorage.setItem("token",t.data.token),location.href="index.html"):(layer.msg("用户名或密码错误",{icon:2}),document.forms[0].elements[1].value="")}}):layer.msg("验证码输入不正确",{icon:2})},init(),createCode();