"use strict";var blind=function(i){this.autoPlay=i.autoPlay&&!0,this.arr=i.arr,this.bladeNum=i.bladeNum||8,this.mouseUp=i.mouseUp||!1,this.animationSpeed=i.animationSpeed||500,this.bladeTime=i.bladeTime||100,this.animationTime=i.animationTime||2e3,this.dots=i.dots&&!0,this.blindEvent,this.callback=i.callback||!1;var t=this,n=void 0,s=0,e=!1,a=!1,o=void 0;this.css=function(){for(var i="",t="",n=0;n<this.bladeNum;n++)t+='<div class="blade"><div class="blade-change"></div></div>';for(var s=0;s<this.arr.length;s++)i+='<div data-num="'+s+'"><span></span></div>';$(i).appendTo(".dots-box"),$(t).appendTo(".blind-pic"),$(".dots-box").children("div:eq(0)").addClass("active"),this.blindEvent=$(".blind-pic").children("div.blade"),this.setBlindWidth(),this.resizeWindowsSize(),this.setA(0)},this.setBg=function(i){for(var t=0;t<this.bladeNum;t++)this.blindEvent.eq(t).children("div.blade-change").css("background-image","url("+this.arr[i][0]+")")},this.setA=function(i){$(".blind-url").attr({title:this.arr[i][1],href:this.arr[i][2]}),$(".blind-url").css("background-image","url("+this.arr[i][0]+")")},this.setBlindWidth=function(){var i=$("#blindSwiper").width();n=i/this.bladeNum,this.blindEvent.children("div.blade-change").css("width",i);for(var t=0;t<this.bladeNum;t++)this.blindEvent.eq(t).css({left:n*t+"px"}),this.blindEvent.children("div.blade-change:eq("+t+")").css("left",-n*t+"px")},this.resizeWindowsSize=function(){$(window).resize(function(){t.setBlindWidth()})},this.animationStart=function(i){e=!0;var s=$(".blind-pic");s.css("z-index","3"),this.setBg(i);for(var o=0;o<this.bladeNum;o++)this.blindEvent.eq(o).css({transition:"width "+this.animationSpeed+"ms ease "+o*this.bladeTime+"ms"});setTimeout(function(){t.blindEvent.css({width:n+"px"})},10),this.dotsPosition(i),this.callback&&this.callback(i);var d=(this.blindEvent.eq(this.bladeNum-1),this.bladeTime*this.bladeNum+this.animationSpeed);setTimeout(function(){t.blindEvent.css({transition:"none"}),t.setA(i),s.css("z-index","1"),t.blindEvent.css({width:"0px"}),e=!1,a&&t.autoPlay&&(a=!1,t.autoPlayFun())},d)},this.switchBlade=function(i){e||(a=!0,window.clearTimeout(o),this.animationStart(t.countPosition(i)))},this.prev=function(){t.switchBlade(!1)},this.next=function(){t.switchBlade(!0)},this.dots=function(i){t.switchBlade(i)},this.buttonClickFun=function(){$("#blindPrev").click(function(){t.prev()}),$("#blindNext").click(function(){t.next()}),$(".dots-box").children("div").click(function(){t.dots($(this).data("num"))})},this.dotsPosition=function(i){this.dots&&$(".dots-box").children("div").eq(i).addClass("active").siblings("div").removeClass("active")},this.countPosition=function(i){return"boolean"==typeof i?i?(s>=this.arr.length-1&&(s=-1),s++):(s<=0&&(s=this.arr.length),s--):s=i,s},this.mouseFun=function(){this.mouseUp&&$("#blindSwiper").mouseenter(function(){t.autoPlay&&window.clearTimeout(o)}).mouseleave(function(){t.autoPlay&&t.autoPlayFun()})},this.autoPlayFun=function(){this.autoPlay&&function i(){o=window.setTimeout(function(){t.animationStart(t.countPosition(!0)),i()},t.animationTime)}()},this.loadImagesFun=function(i,t){},this.init=function(){if(this.arr.length<=2)return void console.log("数组长度不够，请确认后再次运行！");for(var i=0;i<this.arr.length;i++){if(""==this.arr[i][0])return void console.log("数组第"+(i+1)+"段有空白图片！");if(3!==this.arr[i].length)return void console.log("数组不符合规范，请检查后重试！")}this.dots||$("#blind-control").remove(),this.css(),this.autoPlayFun(),this.buttonClickFun(),this.mouseFun()},this.init()};